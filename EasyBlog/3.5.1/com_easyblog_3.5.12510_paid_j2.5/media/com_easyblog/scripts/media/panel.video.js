EasyBlog.module("media/panel.video",function(e){var t=this;EasyBlog.require().view("media/panel.video").done(function(){EasyBlog.Controller("Media.Panel.Video",{defaultOptions:{view:{content:"media/panel.video"},"{insertItemButton}":".insertItemButton","{insertItemDetail}":".insertItemDetail","{header}":".panelHeader","{body}":".panelBody","{footer}":".panelFooter","{playerContainer}":".playerContainer","{insertWidth}":".insertWidth","{insertHeight}":".insertHeight","{autoplay}":".autoplay"}},function(t){return{init:function(){t.view.content({meta:t.item.meta}).appendTo(t.element);var n="player-"+t.item.id,r=t.playerContainer().width(),i=r/16*9;t.playerContainer().height(i).addClass("busy"),t.playerContainer().attr("id",n),EasyBlog.require().script(e.rootPath+"/components/com_easyblog/assets/vendors/jwplayer/jwplayer.js").done(function(e){t.player=jwplayer(n).setup({id:n,width:r,height:i,file:t.item.meta.url,controlbar:"bottom",autostart:!1,backcolor:"#333333",frontcolor:"#ffffff",modes:[{type:"html5"},{type:"flash",src:e.rootPath+"components/com_easyblog/assets/vendors/jwplayer/player.swf"},{type:"download"}]})})},setLayout:function(){},deactivate:function(){t.player&&t.player.getState()=="PLAYING"&&t.player.pause()},"{insertItemButton} click":function(){var e=t.media.dashboard;if(!e)return;var n="false";t.autoplay().val()=="1"&&(n="true");var r=parseInt(t.insertWidth().val(),10),i=parseInt(t.insertHeight().val(),10);if(isNaN(r)||r==0)r=t.item.meta.width;if(isNaN(i)||i==0)i=t.item.meta.height;var s='[embed=video]{file:"'+t.item.meta.path+'",'+'width:"'+(r+"")+'",'+'height:"'+(i+"")+'",'+'autostart:"'+n+'",'+'place:"'+t.place.id+'"'+"}"+"[/embed]";e.editor.insert(s),t.media.insertRecentActivity(t.item.meta)}}}),t.resolve()})});