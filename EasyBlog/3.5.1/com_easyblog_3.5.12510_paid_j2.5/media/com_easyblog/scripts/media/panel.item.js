EasyBlog.module("media/panel.item",function(e){var t=this;EasyBlog.require().library("dialog","ui/position").language("COM_EASYBLOG_MM_CONFIRM_DELETE_ITEM","COM_EASYBLOG_MM_CANCEL_BUTTON","COM_EASYBLOG_MM_YES_BUTTON","COM_EASYBLOG_MM_ITEM_DELETE_CONFIRMATION").done(function(){EasyBlog.Controller("Media.Panel.Item",{defaultOptions:{view:{confirmDelete:"media/delete"},"{header}":".panelHeader","{body}":".panelBody","{footer}":".panelFooter","{sectionHeader}":".panelSectionHeader","{sectionContent}":".panelSectionContent","{removeItemButton}":".removeItemButton"}},function(t){return{init:function(){t.element.addClass("busy");var n=EasyBlog.Controller.Media.Panel[e.String.capitalize(t.item.meta.type)];if(n===undefined&&!t.handlerLoaded){EasyBlog.require().script("media/panel."+t.item.meta.type).done(function(){t.handlerLoaded=!0,t.init()});return}t.handlerLoaded=!0,t.handler=new n(t.element,{controller:{media:t.media,place:t.place,panel:t,item:t.item}}),t.element.removeClass("busy"),t.setLayout()},setLayout:function(){if(t.place.acl().canRemoveItem){if(t.item.meta.path===t.place.browser.options.directorySeparator)return;t.removeItemButton().show()}t.panels.setLayout()},activate:function(){t.handler&&t.handler.activate&&t.handler.activate()},deactivate:function(){t.handler&&t.handler.deactivate&&t.handler.deactivate()},remove:function(){t.handler&&(t.handler._destroyed||t.handler.destroy()),t.panels.removePanel(t.id)},"{removeItemButton} click":function(){if(!t.place.acl().canRemoveItem)return;e.dialog({title:e.language("COM_EASYBLOG_MM_CONFIRM_DELETE_ITEM"),content:"<div style='font-size: 12px'>"+e.language("COM_EASYBLOG_MM_ITEM_DELETE_CONFIRMATION")+t.item.meta.title+"?</div>",showOverlay:!1,body:{css:{minWidth:200,minHeight:100}},buttons:[{name:e.language("COM_EASYBLOG_MM_CANCEL_BUTTON"),click:function(){e.dialog().close()}},{name:e.language("COM_EASYBLOG_MM_YES_BUTTON"),click:function(){EasyBlog.ajax("site.views.media.delete",{place:t.place.id,path:t.item.meta.path},{success:function(){e.dialog().close();var n=t.item.meta;n.place=t.place.id,t.place.browser.removeItem(t.item)},fail:function(e){console.log(e)}})}}]})},"{sectionHeader} click":function(e){var t=e.parent();t.toggleClass("active")}}}),t.resolve()})});