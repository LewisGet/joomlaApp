EasyBlog.module("media/browser.title",function(e){var t=this;EasyBlog.require().library("easing").done(function(){EasyBlog.Controller("Media.Browser.Title",{defaultOptions:{"{title}":"> .browserHeader .browserTitle","{titleForm}":"> .browserHeader .browserTitle .titleForm","{titleText}":"> .browserHeader .browserTitle .titleText","{titleInput}":"> .browserHeader .browserTitle .titleInput","{renameButton}":"> .browserHeader .browserTitle .renameButton","{cancelRenameButton}":"> .browserHeader .browserTitle .cancelRenameButton"}},function(t){return{init:function(){t.browser.title=t,t.setTitle(t.browser.options.title)},"{self} setLayout":function(){t.title().hasClass("edit")?t.setTitleFormLayout():t.setTitleTextLayout()},setTitleTextLayout:function(){var e=t.titleText(),n=t.title().width();e.css("width","auto"),e.width()>n&&e.width(n)},setTitleFormLayout:function(){var e=t.title(),n=t.titleForm(),r=t.titleInput(),i=t.renameButton();n.width(e.width()-(n.outerWidth()-n.width())),r.width(n.width()-(r.outerWidth()-r.width())-i.outerWidth(!0)-4)},stripExtension:function(e){var t=e.lastIndexOf(".");return t>0?e.substring(0,t):e},setTitle:function(e){t.hideTitleEditingForm();var e=e||t.browser.currentItem().meta.title;t.titleText().html(e).css("width","auto"),t.setTitleTextLayout()},showTitleEditingForm:function(){t.title().addClass("edit"),t.titleInput().val(t.stripExtension(t.browser.currentItem().meta.title)).select(),t.setTitleFormLayout()},hideTitleEditingForm:function(){t.title().removeClass("edit")},renameTitle:function(){var n=t.browser.currentItem();EasyBlog.ajax("site.views.media.move",{place:t.place.id,fromPath:n.meta.path,toPath:e.uri(n.meta.path).toPath("../"+t.titleInput().val())+""},{beforeSend:function(){t.titleForm().addClass("busy")},success:function(){},fail:function(){},complete:function(){t.titleForm().removeClass("busy")}})},"{titleText} mouseover":function(e){return;var n},"{titleText} mouseout":function(e){e.removeClass("hover")},"{titleText} click":function(e){return;var n},"{cancelRenameButton} click":function(){t.hideTitleEditingForm()},"{renameButton} click":function(){t.renameTitle()}}}),t.resolve()})});